{% extends "base.html" %}
{% load static %}

{% block title %}
Equipments 
{% endblock title %}

{% block content %}

<div class="mx-auto col-md-6">
    <h2 class="mt-3">Equipments</h2>
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 mt-3">
            <ul class="list-group list-group-flush" id="equipments">
                {% for equipment in equipments %}
                    <li class="list-group-item">
                        <p>{{ equipment }} - ({{ equipment.id_num }})
                            <button style="float: right;" class="btn btn-outline-info" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" 
                            id="open-modal" data-url='{% url "products:equipment-update" equipment.pk %}'>Update</button>
                        </p>
                    </li>  
                {% endfor %}
            </ul>
        </div>
    </div>


    <br>
    <!-- Button trigger modal -->
    <button type="button" class="mt-3 btn btn-outline-success col-md-6 mx-auto" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Add equipment
    </button>
</div>

    {% include 'modal.html' with form=form %}

    <!-- Here we create this empty div for inserting modal -->
    <div id="modal-div"></div>

    <script>
        var modalDiv = $("#modal-div");
        $("#open-modal").on("click", function() {
        $.ajax({
            url: $(this).attr("data-url"),
            success: function(data) {
            modalDiv.html(data);
            $("#myEdit").modal();
            }
        });
        });
    </script>
    <script src="{% static 'bmr/js/equipment.js' %}"></script>

{% endblock content %}

